///----------------------------------------------------------------------------------------------------
/// Copyright (c) Raidcore.GG - All rights reserved.
///
/// Name         :  ExportStyleModal.h
/// Description  :  Modal for style exports.
/// Authors      :  K. Bieniek
///----------------------------------------------------------------------------------------------------

#pragma once

#include <windows.h>
#include <string>
#include <filesystem>

#include "UI/Controls/CtlModal.h"

///----------------------------------------------------------------------------------------------------
/// CExportStyleModal Class
///----------------------------------------------------------------------------------------------------
class CExportStyleModal : public virtual IModal
{
	public:
	///----------------------------------------------------------------------------------------------------
	/// ctor
	///----------------------------------------------------------------------------------------------------
	CExportStyleModal();

	///----------------------------------------------------------------------------------------------------
	/// RenderContent:
	/// 	Render function of modal contents.
	///----------------------------------------------------------------------------------------------------
	void RenderContent() override;

	///----------------------------------------------------------------------------------------------------
	/// OnClosing:
	/// 	Override close to process result and reset variables.
	///----------------------------------------------------------------------------------------------------
	void OnClosing() override;

	///----------------------------------------------------------------------------------------------------
	/// SetData:
	/// 	Sets the to be exported code and shows the modal.
	///----------------------------------------------------------------------------------------------------
	void SetData(const std::string& aBase64Style);

	private:
	std::string           Data;
	char                  PathBuffer[MAX_PATH];
	std::filesystem::path Path;

	///----------------------------------------------------------------------------------------------------
	/// ClearData:
	/// 	Resets the data.
	///----------------------------------------------------------------------------------------------------
	void ClearData();
};
